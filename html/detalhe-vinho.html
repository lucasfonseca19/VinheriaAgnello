<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Detalhe do Vinho - Vinheria Agnello</title>

  <!-- Bootstrap CSS -->
  <link href="../css/bootstrap.min.css" rel="stylesheet">
  <!-- Estilos personalizados -->
  <link href="../css/styles.css" rel="stylesheet">
</head>

<body>

  <!-- Header -->
  <header class="agnello-header">
    <div class="container">
      <div class="row align-items-center">
        <div class="col-md-4">
          <a href="home.html" class="agnello-logo text-decoration-none">
            <img src="../assets/logo.png" alt="Vinheria Agnello">
            <span>VINHERIA<br>AGNELLO</span>
          </a>
        </div>

        <div class="col-md-4">
          <nav class="agnello-nav text-center">
            <a href="catalogo.html" class="text-dourado">Catálogo</a>
            <a href="#quiz">Descubra seu vinho</a>
            <a href="#blog">Blog Agnello</a>
          </nav>
        </div>

        <div class="col-md-4">
          <div class="agnello-icons text-end">
            <a href="login.html" title="Login">
              <img src="https://cdn-icons-png.flaticon.com/128/2321/2321232.png" alt="Login">
            </a>
            <a href="#carrinho" title="Carrinho">
              <img src="https://cdn-icons-png.flaticon.com/128/1170/1170678.png" alt="Carrinho">
            </a>
          </div>
        </div>
      </div>
    </div>
  </header>

  <!-- Detalhe do Vinho Main Section -->
  <main class="py-5 bg-bege">
    <div class="container">

      <!-- Breadcrumb -->
      <div class="row mb-4">
        <div class="col-12">
          <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
              <li class="breadcrumb-item"><a href="home.html" class="text-dourado">Home</a></li>
              <li class="breadcrumb-item"><a href="catalogo.html" class="text-dourado">Catálogo</a></li>
              <li class="breadcrumb-item active text-marrom" aria-current="page" id="breadcrumb-vinho">Carregando...</li>
            </ol>
          </nav>
        </div>
      </div>

      <!-- Conteúdo Principal do Vinho -->
      <div class="row mb-5">

        <!-- Imagem do Vinho -->
        <div class="col-lg-6 mb-4">
          <div class="wine-detail-image bg-white p-4 rounded shadow-sm text-center">
            <img id="wine-image" src="" alt="" class="img-fluid rounded" style="max-height: 500px; object-fit: contain;">
          </div>
        </div>

        <!-- Informações do Vinho -->
        <div class="col-lg-6">
          <div class="wine-detail-info bg-white p-4 rounded shadow-sm">

            <!-- Nome e Avaliação -->
            <div class="mb-3">
              <h1 class="hero-title mb-2" id="wine-name">Carregando...</h1>
              <div class="rating mb-2" id="wine-rating">
                <!-- Stars serão inseridas via JavaScript -->
              </div>
              <div class="badges-container mb-3" id="wine-badges">
                <!-- Badges serão inseridos via JavaScript -->
              </div>
            </div>

            <!-- Preço -->
            <div class="price-section mb-4">
              <h2 class="text-dourado font-playfair" id="wine-price">R$ 0,00</h2>
            </div>

            <!-- Informações Técnicas -->
            <div class="wine-tech-info mb-4">
              <div class="row">
                <div class="col-sm-6 mb-3">
                  <h6 class="text-marrom mb-1"><strong>Região:</strong></h6>
                  <p class="mb-0" id="wine-region">-</p>
                </div>
                <div class="col-sm-6 mb-3">
                  <h6 class="text-marrom mb-1"><strong>Uva:</strong></h6>
                  <p class="mb-0" id="wine-grape">-</p>
                </div>
                <div class="col-sm-6 mb-3">
                  <h6 class="text-marrom mb-1"><strong>Ano:</strong></h6>
                  <p class="mb-0" id="wine-year">-</p>
                </div>
                <div class="col-sm-6 mb-3">
                  <h6 class="text-marrom mb-1"><strong>Teor Alcoólico:</strong></h6>
                  <p class="mb-0" id="wine-alcohol">-</p>
                </div>
                <div class="col-sm-6 mb-3">
                  <h6 class="text-marrom mb-1"><strong>Corpo:</strong></h6>
                  <p class="mb-0" id="wine-body">-</p>
                </div>
                <div class="col-sm-6 mb-3">
                  <h6 class="text-marrom mb-1"><strong>Doçura:</strong></h6>
                  <p class="mb-0" id="wine-sweetness">-</p>
                </div>
              </div>
              <div class="mb-3">
                <h6 class="text-marrom mb-1"><strong>Harmonização:</strong></h6>
                <p class="mb-0" id="wine-pairing">-</p>
              </div>
            </div>

            <!-- Seletor Quantidade e Carrinho -->
            <div class="purchase-section">
              <div class="row align-items-end">
                <div class="col-sm-4 mb-3">
                  <label for="quantity" class="form-label text-marrom"><strong>Quantidade:</strong></label>
                  <select class="form-select" id="quantity">
                    <option value="1">1 garrafa</option>
                    <option value="2">2 garrafas</option>
                    <option value="3">3 garrafas</option>
                    <option value="4">4 garrafas</option>
                    <option value="5">5 garrafas</option>
                    <option value="6">6 garrafas</option>
                    <option value="7">7 garrafas</option>
                    <option value="8">8 garrafas</option>
                    <option value="9">9 garrafas</option>
                    <option value="10">10 garrafas</option>
                  </select>
                </div>
                <div class="col-sm-8 mb-3">
                  <button class="btn btn-dourado w-100 py-3" id="add-to-cart">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="me-2" viewBox="0 0 16 16">
                      <path d="M0 1.5A.5.5 0 0 1 .5 1H2a.5.5 0 0 1 .485.379L2.89 3H14.5a.5.5 0 0 1 .491.592l-1.5 8A.5.5 0 0 1 13 12H4a.5.5 0 0 1-.491-.408L2.01 3.607 1.61 2H.5a.5.5 0 0 1-.5-.5zM3.102 4l1.313 7h8.17l1.313-7H3.102zM5 12a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm7 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm-7 1a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm7 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/>
                    </svg>
                    Adicionar ao Carrinho
                  </button>
                </div>
              </div>
              <div class="stock-info mt-2">
                <small class="text-cinza">Em estoque: <span id="wine-stock">0</span> garrafas disponíveis</small>
              </div>
            </div>

          </div>
        </div>
      </div>

      <!-- Seção "A Palavra dos Agnello" -->
      <div class="row">
        <div class="col-12">
          <div class="agnello-word-section bg-white rounded shadow-sm overflow-hidden">

            <!-- Header da Seção -->
            <div class="agnello-word-header bg-dourado text-white p-4">
              <h3 class="font-playfair mb-0 text-center">
          
                A Palavra dos Agnello
    
            </div>

            <!-- Conteúdo da Descrição -->
            <div class="agnello-word-content p-5">
              <div class="row justify-content-center">
                <div class="col-lg-10">
                  <blockquote class="blockquote text-center mb-0">
                    <p class="fs-5 text-marrom font-roboto" id="wine-description" style="line-height: 1.8; font-style: italic;">
                      Carregando descrição...
                    </p>
                  </blockquote>
                </div>
              </div>
            </div>

          </div>
        </div>
      </div>

      <!-- Botão Voltar ao Catálogo -->
      <div class="row mt-5">
        <div class="col-12 text-center">
          <a href="catalogo.html" class="btn btn-agnello">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="me-2" viewBox="0 0 16 16">
              <path fill-rule="evenodd" d="M12 8a.5.5 0 0 1-.5.5H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H11.5a.5.5 0 0 1 .5.5z"/>
            </svg>
            Voltar ao Catálogo
          </a>
        </div>
      </div>

    </div>
  </main>

  <!-- Footer -->
  <footer class="agnello-footer">
    <div class="container">
      <div class="row align-items-center">
        <div class="col-md-4">
          <a href="home.html" class="agnello-logo text-decoration-none">
            <img src="../assets/logo.png" alt="Vinheria Agnello">
            <span>VINHERIA<br>AGNELLO</span>
          </a>
        </div>
        <div class="col-md-4">
          <p class="mb-1">Rua Fiap da Silva, 99, São Paulo</p>
          <p class="mb-1">grupolegal@agnello.com</p>
          <p class="mb-0">+55 (11) 91212-1212</p>
        </div>
        <div class="col-md-4">
          <p class="mb-1"><strong>FIAP Grupo</strong></p>
          <p class="mb-0">
            Lucas Oliveira RM<br>
            Matheus Vieira RM<br>
            Vinícius Taiki RM 852776
          </p>
        </div>
      </div>
    </div>
  </footer>

  <!-- Bootstrap JS -->
  <script src="../js/bootstrap.bundle.min.js"></script>

  <!-- JavaScript para carregar dados do vinho -->
  <script>
    // Função para obter parâmetro da URL
    function getUrlParameter(name) {
      name = name.replace(/[\[]/, '\\[').replace(/[\]]/, '\\]');
      var regex = new RegExp('[\\?&]' + name + '=([^&#]*)');
      var results = regex.exec(location.search);
      return results === null ? '' : decodeURIComponent(results[1].replace(/\+/g, ' '));
    }

    // Função para criar as estrelas de avaliação
    function createStars(rating) {
      let stars = '';
      for (let i = 1; i <= 5; i++) {
        if (i <= rating) {
          stars += '<span class="text-dourado">★</span>';
        } else {
          stars += '<span class="text-cinza">☆</span>';
        }
      }
      return stars;
    }

    // Função para criar badges
    function createBadges(badges) {
      return badges.map(badge =>
        `<span class="badge bg-dourado me-1 mb-1">${badge}</span>`
      ).join('');
    }

    // Carregar dados do vinho
    async function loadWineData() {
      try {
        const wineId = getUrlParameter('id');
        if (!wineId) {
          throw new Error('ID do vinho não fornecido');
        }

        const response = await fetch('../data/vinhos.json');
        const data = await response.json();

        const wine = data.vinhos.find(v => v.id == wineId);
        if (!wine) {
          throw new Error('Vinho não encontrado');
        }

        // Atualizar informações na página
        document.getElementById('breadcrumb-vinho').textContent = wine.nome;
        document.getElementById('wine-name').textContent = wine.nome;
        document.getElementById('wine-image').src = wine.imagem;
        document.getElementById('wine-image').alt = wine.nome;
        document.getElementById('wine-rating').innerHTML = createStars(wine.avaliacao);
        document.getElementById('wine-badges').innerHTML = createBadges(wine.badges);
        document.getElementById('wine-price').textContent = `R$ ${wine.preco.toFixed(2).replace('.', ',')}`;
        document.getElementById('wine-region').textContent = wine.regiao;
        document.getElementById('wine-grape').textContent = wine.uva;
        document.getElementById('wine-year').textContent = wine.ano;
        document.getElementById('wine-alcohol').textContent = `${wine.teor_alcoolico}%`;
        document.getElementById('wine-body').textContent = wine.corpo;
        document.getElementById('wine-sweetness').textContent = wine.doçura;
        document.getElementById('wine-pairing').textContent = wine.harmonizacao;
        document.getElementById('wine-stock').textContent = wine.estoque;
        // Função para formatar nomes Agnello em negrito
        function formatAgnelloNames(text) {
          return text
            .replace(/Giulio Agnello/g, '<strong>Giulio Agnello</strong>')
            .replace(/Bianca Agnello/g, '<strong>Bianca Agnello</strong>');
        }

        const description = wine.descricao_agnello || 'Descrição não disponível.';
        document.getElementById('wine-description').innerHTML = formatAgnelloNames(description);

        // Atualizar título da página
        document.title = `${wine.nome} - Vinheria Agnello`;

      } catch (error) {
        console.error('Erro ao carregar dados do vinho:', error);
        document.getElementById('wine-name').textContent = 'Vinho não encontrado';
        document.getElementById('wine-description').textContent = 'Não foi possível carregar as informações do vinho.';
      }
    }

    // Carregar dados quando a página estiver pronta
    document.addEventListener('DOMContentLoaded', loadWineData);

    // Funcionalidade do botão adicionar ao carrinho
    document.getElementById('add-to-cart').addEventListener('click', function() {
      const quantity = document.getElementById('quantity').value;
      const wineName = document.getElementById('wine-name').textContent;

      // Aqui você pode implementar a lógica do carrinho
      alert(`${quantity} garrafa(s) de "${wineName}" adicionada(s) ao carrinho!`);
    });
  </script>

</body>

</html>